<!doctype html>
<html lang="en-US">
  <head>
    <title>Launching Codo in early access</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta
      name="description"
      content="Codo launches as a Github marketplace app"
    />
    <meta name="robots" content="index, follow" />

    <link
      rel="canonical"
      href="https://jew.ski/article/codo-early-access/index.html"
    />

    <link rel="icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/logo192.png" />

    <meta name="theme-color" content="#178bfb" />

    <meta property="og:title" content="Launching Codo in early access" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="Chris Andrejewski" />
    <meta property="og:url" content="/article/codo-early-access/index.html" />

    <meta property="twitter:card" content="summary" />
    <meta name="twitter:site" content="compooter" />
    <meta name="twitter:title" content="Launching Codo in early access" />
    <meta
      name="twitter:description"
      content="Codo launches as a Github marketplace app"
    />

    <link rel="stylesheet" href="/stylesheet/highlight-atom-one.css" />
    <style data-styled="true" data-styled-version="5.3.11">
      .rzRBI {
        color: rgb(6, 90, 163);
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .rzRBI {
          color: #5eb6ff;
        }
      } /*!sc*/
      data-styled.g1[id='sc-aXZVg'] {
        content: 'rzRBI,';
      } /*!sc*/
      .juOMfq {
        padding-bottom: 4rem;
      } /*!sc*/
      data-styled.g2[id='sc-gEvEer'] {
        content: 'juOMfq,';
      } /*!sc*/
      .qTPpo {
        background-color: #fff;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .qTPpo {
          background-color: #16202e;
        }
      } /*!sc*/
      data-styled.g3[id='sc-eqUAAy'] {
        content: 'qTPpo,';
      } /*!sc*/
      .jTutFS {
        padding: 0px 1rem;
        max-width: 720px;
        margin: 0px auto;
      } /*!sc*/
      data-styled.g4[id='sc-fqkvVR'] {
        content: 'jTutFS,';
      } /*!sc*/
      .efqZme {
        margin: 15px 0em;
      } /*!sc*/
      .efqZme:first-child {
        margin-top: 0px;
      } /*!sc*/
      .efqZme:last-child {
        margin-bottom: 0px;
      } /*!sc*/
      data-styled.g5[id='sc-dcJsrY'] {
        content: 'efqZme,';
      } /*!sc*/
      .khRKiz {
        padding-top: 3rem;
        margin-bottom: 3rem;
      } /*!sc*/
      data-styled.g6[id='sc-iGgWBj'] {
        content: 'khRKiz,';
      } /*!sc*/
      .fmIvPa {
        font-size: 3rem;
        margin: 0px;
      } /*!sc*/
      @media (max-width: 720px) {
        .fmIvPa {
          font-size: 1.8rem;
        }
      } /*!sc*/
      data-styled.g7[id='sc-gsFSXq'] {
        content: 'fmIvPa,';
      } /*!sc*/
      .cFLcRl {
        margin: 0;
        line-height: 1.5rem;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .cFLcRl {
          color: #dbe0e7;
        }
      } /*!sc*/
      data-styled.g8[id='sc-kAyceB'] {
        content: 'cFLcRl,';
      } /*!sc*/
      .dpyEem {
        display: inline-block;
        font-size: 0.9rem;
        line-height: 1rem;
        background-color: #dcefff;
        color: #151515;
        border-radius: 3px;
        padding: 0.25rem 0.5rem;
        margin: 0.25rem 0.5rem 0.25rem 0;
        -webkit-text-decoration: none;
        text-decoration: none;
        white-space: nowrap;
      } /*!sc*/
      .dpyEem:hover {
        -webkit-text-decoration: underline;
        text-decoration: underline;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .dpyEem {
          background-color: #2f3d4e;
          color: #c8d2e0;
        }
      } /*!sc*/
      data-styled.g9[id='sc-imWYAI'] {
        content: 'dpyEem,';
      } /*!sc*/
      .ypGOR {
        color: inherit;
        -webkit-text-decoration: none;
        text-decoration: none;
      } /*!sc*/
      .ypGOR:hover span {
        -webkit-text-decoration: underline;
        text-decoration: underline;
      } /*!sc*/
      .ypGOR:hover:after {
        opacity: 1;
      } /*!sc*/
      .ypGOR:after {
        content: 'ðŸ”—';
        padding: 0 0.5rem;
        font-size: 1rem;
        opacity: 0.25;
      } /*!sc*/
      data-styled.g10[id='sc-jXbUNg'] {
        content: 'ypGOR,';
      } /*!sc*/
      .jXVzSo {
        padding: 1rem;
        margin: 3rem 0;
        background-color: #eef8ff;
        color: #4a8dc8;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .jXVzSo {
          background-color: #2a3d55;
          color: #95afd1;
        }
      } /*!sc*/
      .jXVzSo label {
        text-transform: uppercase;
        font-weight: bold;
        font-size: 0.85rem;
        color: #08273f;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .jXVzSo label {
          color: #dde0e3;
        }
      } /*!sc*/
      .jXVzSo .sc-kAyceB {
        color: #153248;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .jXVzSo .sc-kAyceB {
          color: #d0e4ff;
        }
      } /*!sc*/
      .jXVzSo ul {
        margin: 0.5rem 0;
        padding: 0;
        padding-left: 1rem;
      } /*!sc*/
      .jXVzSo a {
        color: rgb(6, 90, 163);
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .jXVzSo a {
          color: #5eb6ff;
        }
      } /*!sc*/
      .jXVzSo a code {
        font-family: Monaco, monospace;
        font-size: 0.9rem;
        padding: 0 0.25rem;
        border-radius: 3px;
        background-color: #b9dbf5;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .jXVzSo a code {
          background-color: #354e6d;
        }
      } /*!sc*/
      data-styled.g11[id='sc-dhKdcB'] {
        content: 'jXVzSo,';
      } /*!sc*/
      * {
        box-sizing: border-box;
      } /*!sc*/
      body {
        margin: 0px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica,
          Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
          'Segoe UI Symbol';
        background-color: #eff7fd;
        color: #000;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        body {
          background-color: #0d1117;
          color: #fff;
        }
      } /*!sc*/
      data-styled.g12[id='sc-global-kFwHxP1'] {
        content: 'sc-global-kFwHxP1,';
      } /*!sc*/
      .denQqw {
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: justify;
        -webkit-justify-content: space-between;
        -ms-flex-pack: justify;
        justify-content: space-between;
        -webkit-align-items: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
      } /*!sc*/
      .denQqw h1 {
        font-size: 1.5rem;
        padding: 1rem 0px;
        margin: 0;
      } /*!sc*/
      .denQqw h1 a {
        -webkit-text-decoration: none;
        text-decoration: none;
        color: inherit;
      } /*!sc*/
      .denQqw h1 a:hover {
        -webkit-text-decoration: underline;
        text-decoration: underline;
      } /*!sc*/
      @media (max-width: 720px) {
        .denQqw .sc-kpDqfm {
          display: none;
        }
      } /*!sc*/
      data-styled.g14[id='sc-dAlyuH'] {
        content: 'denQqw,';
      } /*!sc*/
      .frqlqR {
        border-top: 2px solid #d7d7d7;
        margin: 4rem 0;
        padding-top: 4rem;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .frqlqR {
          border-color: #4c545e;
        }
      } /*!sc*/
      data-styled.g54[id='sc-fXSgeo'] {
        content: 'frqlqR,';
      } /*!sc*/
      .eRjDjS h1 > a,
      .eRjDjS h2 > a,
      .eRjDjS h3 > a,
      .eRjDjS h4 > a,
      .eRjDjS h5 > a,
      .eRjDjS h6 > a {
        color: inherit;
        -webkit-text-decoration: none;
        text-decoration: none;
      } /*!sc*/
      .eRjDjS h1 > a:hover,
      .eRjDjS h2 > a:hover,
      .eRjDjS h3 > a:hover,
      .eRjDjS h4 > a:hover,
      .eRjDjS h5 > a:hover,
      .eRjDjS h6 > a:hover {
        -webkit-text-decoration: underline;
        text-decoration: underline;
      } /*!sc*/
      .eRjDjS p,
      .eRjDjS li {
        line-height: 1.5rem;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .eRjDjS p,
        .eRjDjS li {
          color: #dbe0e7;
        }
      } /*!sc*/
      .eRjDjS a {
        color: rgb(6, 90, 163);
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .eRjDjS a {
          color: #5eb6ff;
        }
      } /*!sc*/
      .eRjDjS ul {
        padding-left: 1rem;
      } /*!sc*/
      .eRjDjS code {
        font-family: Monaco, monospace;
      } /*!sc*/
      .eRjDjS h1 code,
      .eRjDjS h2 code,
      .eRjDjS h3 code,
      .eRjDjS h4 code,
      .eRjDjS h5 code,
      .eRjDjS h6 code,
      .eRjDjS li code,
      .eRjDjS p code {
        font-size: 0.9em;
        padding: 0 0.25em;
        border-radius: 3px;
        background-color: #eff7fd;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .eRjDjS h1 code,
        .eRjDjS h2 code,
        .eRjDjS h3 code,
        .eRjDjS h4 code,
        .eRjDjS h5 code,
        .eRjDjS h6 code,
        .eRjDjS li code,
        .eRjDjS p code {
          background-color: #2b3644;
        }
      } /*!sc*/
      .eRjDjS pre {
        background-color: #eff7fd;
        padding: 0.5rem 0.75rem;
        overflow-x: scroll;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .eRjDjS pre {
          background-color: #2b3645;
        }
      } /*!sc*/
      .eRjDjS img {
        display: block;
        max-width: 100%;
        max-height: 520px;
        font-size: 0;
        margin: 0px auto;
        padding: 0px;
      } /*!sc*/
      .eRjDjS video {
        display: block;
        margin: 1rem auto;
      } /*!sc*/
      .eRjDjS figure {
        text-align: center;
        margin: 20px 0px;
      } /*!sc*/
      .eRjDjS figure img {
        display: block;
        max-width: 90vw;
        margin: 0px auto;
      } /*!sc*/
      .eRjDjS figure figcaption {
        opacity: 0.9;
        font-size: 1.1em;
        margin: 10px auto;
      } /*!sc*/
      .eRjDjS .cali-collage {
        padding: 20px 0px;
        text-align: center;
      } /*!sc*/
      .eRjDjS .cali-collage img {
        display: inline-block;
        margin: 10px;
        max-width: 95vw;
        vertical-align: middle;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
      } /*!sc*/
      data-styled.g55[id='sc-JrDLc'] {
        content: 'eRjDjS,';
      } /*!sc*/
      .jACQif {
        text-align: center;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .jACQif {
          color: #dbe0e7;
        }
      } /*!sc*/
      .jACQif h3 {
        margin: 0.5em 0;
      } /*!sc*/
      .jACQif p {
        margin: 0;
      } /*!sc*/
      data-styled.g56[id='sc-fjvvzt'] {
        content: 'jACQif,';
      } /*!sc*/
    </style>

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-G3SKTPFTEZ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || []
      function gtag() {
        dataLayer.push(arguments)
      }
      gtag('js', new Date())
      gtag('config', 'G-G3SKTPFTEZ')
    </script>
  </head>
  <body>
    <div class="sc-eqUAAy qTPpo">
      <div class="sc-gEvEer juOMfq">
        <div class="sc-eqUAAy qTPpo">
          <div class="sc-fqkvVR jTutFS">
            <nav class="sc-dAlyuH denQqw">
              <h1><a href="/">Chris Andrejewski</a></h1>
            </nav>
          </div>
        </div>
        <div class="sc-fqkvVR jTutFS">
          <div class="sc-iGgWBj khRKiz">
            <p class="sc-kAyceB cFLcRl">
              <a href="/writing" class="sc-imWYAI dpyEem">Articles</a
              ><a
                href="/category/engineering/index.html"
                class="sc-imWYAI dpyEem"
                >Engineering</a
              ><a href="/category/product/index.html" class="sc-imWYAI dpyEem"
                >Product</a
              >
            </p>
            <h1 class="sc-gsFSXq fmIvPa">
              <a href="#" class="sc-jXbUNg ypGOR"
                ><span>Launching Codo in early access</span></a
              >
            </h1>
            <p class="sc-kAyceB cFLcRl">
              Codo launches as a Github marketplace app
            </p>
          </div>
          <div class="sc-dhKdcB jXVzSo">
            <p class="sc-kAyceB cFLcRl"><label>Table of contents</label></p>
            <div>
              <ul>
                <li>
                  <a href="#building-a-github-marketplace-app"
                    >Building a Github marketplace app</a
                  >
                </li>
                <li>
                  <a href="#migrating-to-pure-esm">Migrating to pure ESM</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="sc-dcJsrY efqZme">
            <div class="sc-JrDLc eRjDjS">
              <p>
                I'm happy to announce Codo is now in early access at
                <a href="https://codo.dev">codo.dev</a>!
              </p>
              <p>
                It's designed as a Github marketplace app and has a quick
                onboarding experience. The product builds on the
                <a href="/article/codo-todo-comments">open-source CLI tool</a>,
                offering in particular better search features.
              </p>
              <p>
                I've launched the product in early access and it's free to use
                right now. I have every intention of charging a reasonable price
                in the future to fund additional development in this space.
                Interestingly, the Github Marketplace requires me to offer the
                app for free for a period of time until the app has 100
                installations. So I figured an early access plan will help
                kickstart adoption/awareness.
              </p>
              <p>
                Check out the app, please
                <a href="mailto:christoper.andrejewski+codo@gmail.com"
                  >shoot me feedback on it</a
                >, and thanks in advance!
              </p>
              <p>
                Now let's talk about some the engineering pieces of building
                this app.
              </p>
              <h1 id="building-a-github-marketplace-app">
                <a href="#building-a-github-marketplace-app"
                  >Building a Github marketplace app</a
                >
              </h1>
              <p>
                This is my first Github marketplace app. Of the projects I work
                on, Codo seemed like the perfect candidate for the marketplace
                because it pairs so well with Git.
              </p>
              <p>
                While Codo is written in Rust, the app is written in
                Node.js/Typescript. The architecture is fairly simple. For
                example, lots of the normal application boilerplate surrounding
                user management I've leaned on Github for. Overall, it has been
                a pretty good experience integrating with Github.
              </p>
              <p>
                Here's a friction log of sharp edges of working with Github:
              </p>
              <ul>
                <li>
                  Github published some bad SDK versions, I had to use older
                  ones.
                </li>
                <li>
                  Initializing a Github client is weird. I need an
                  <code>app_id</code>, <code>app_private_key</code>,
                  <code>app_webhook_secret</code>, <code>client_id</code>, and
                  <code>client_secret</code> plus auth tokens in various
                  contexts. Toss in JWT and request verifying/signing bits and
                  dang it's <em>necessary</em> Github ship SDKs to help with
                  this. And the SDKs still don't make the experience great. Not
                  to make a rant here, but Stripe processes +1 trillion dollars
                  on behalf of huge and small companies and governments.
                  Stripe's still rocking a single <code>publishable_key</code>,
                  <code>secret_key</code>, and <code>webhook_secret</code>. I'm
                  very wary of these sophisticated client auth schemes because
                  very serious business is done with the simple schemes just
                  fine.
                </li>
                <li>
                  Speaking of SDKs, I'm always disappointed by their complete
                  disregard for modeling errors. I appreciate Rust/Go that force
                  the SDK designers hand to give us as consumers something. But
                  Github's JavaScript is <code>try..catch</code> city, learned
                  the hard way from testing locally and in production over a
                  fairly long period of time and I'm still not happy with
                  <em>spec-level</em> robustness of my code.
                </li>
                <li>
                  Github's SDKs do shine in terms of TypeScript support. Webhook
                  payloads and request/responses are well typed. They've
                  embraced the features and limitations of TypeScript in how
                  they design their JavaScript APIs. It's obvious Github does
                  its JavaScript in TypeScript. This isn't to say the types are
                  amazing. At the end of the day the SDK does resurface sharp
                  edges, allowing nulls where there are never nulls, and a lack
                  of calling context that one would encounter from the REST API
                  spec. It's nonetheless a decent SDK.
                </li>
                <li>
                  Making a Github app and getting it listed in the marketplace
                  takes two manual reviews. I was happy with the response time
                  considering the human element they've deemed necessary. Both
                  reviews were done in under two days and I was approved and on
                  my way. What was frustrating was just how much of the admin
                  interface was shielded off <em>until</em> I got approved. So
                  the next steps were super unclear and it made it hard to do
                  more work that would be coming down the line based on the
                  docs.
                </li>
                <li>
                  There is noticeable slowness in the API. I'm pretty mindful of
                  minimizing and deferring work in Codo so the experience is
                  snappy for the most part but I'm seeing about
                  <code>200ms</code> per Github API request and those requests
                  dominate the overall request time. I've lightly looked at
                  optimizing with their GraphQL API without much improvement,
                  and into my own server-side caching but now I'm trading off
                  correctness and new complexity. I'd like a faster API.
                </li>
                <li>
                  Testing is an afterthought for Github apps. The testing advice
                  is basically make the same app again. There's no help or
                  assistance for copying over settings or anything. There's no
                  code as infrastructure way to define these apps so it was a
                  lot of poking, pasting, and comparing between the various
                  versions of the app I working on.
                </li>
              </ul>
              <p>
                Okay, that's everything I can think of for now. Which means
                overall, this API experience was pretty good!
              </p>
              <h1 id="migrating-to-pure-esm">
                <a href="#migrating-to-pure-esm">Migrating to pure ESM</a>
              </h1>
              <p>
                Unrelated to anything really, in the development of Codo I
                migrated my codebase to pure-ESM modules. This means my
                <code>package.json</code> has
                <code>&quot;type&quot;: &quot;module&quot;</code> in it.
              </p>
              <p>
                ESM has been around a long time but adoption is still not there.
                Over the migration hump, I'm happy with it and hope others get
                on the train.
              </p>
              <p>
                It's hard to make the case for a move to ESM in a business
                context because, excluding subtle production facing bugs, the
                measurable impact of such a migration is small. I like ESM
                because, compared to CommonJS, it's less magic. It gets easier
                to do tree-shaking, there's less obscure AST walking, file
                path-ing is more clear. It's a bunch of small things that do and
                have slowed me down working in the weeds of keeping a JS build
                system afloat.
              </p>
              <p>
                A large business can afford to have one unfortunate person or
                team watch all the transpilers and build tools and kick them
                along as they fall over in more and more ways. But it does seem,
                for the better, it does make economic sense to adopt ESM in
                mid-size and smaller projects.
              </p>
              <p>
                Since 2015 when ESM was introduced, we've loved the syntax but
                have spent a massive effort trying to tech ourselves out of a
                migration. Nearing a decade since, I think we've tech'd long
                enough and it's time to truly embrace ESM as the much simpler
                future for JavaScript.
              </p>
              <p>Thanks for reading!</p>
            </div>
          </div>
          <div class="sc-dcJsrY efqZme">
            <p class="sc-kAyceB cFLcRl">
              <small
                ><time
                  datetime="2024-03-23T00:00:00.000Z"
                  title="2024-03-23T00:00:00.000Z"
                  >Published 3/23/2024</time
                ></small
              >
            </p>
          </div>
          <div
            class="sc-fXSgeo frqlqR newsletter-container"
            data-frame-src="https://newsletter.jew.ski/frame/subscribe"
          >
            <div class="sc-fjvvzt jACQif">
              <h3>Subscribe for new articles</h3>
              <div class="newsletter-form"></div>
              <p>
                <small
                  >Or add the
                  <a href="/writing/feed.atom.xml" class="sc-aXZVg rzRBI"
                    >Atom feed</a
                  >
                  to your feed reader.</small
                >
              </p>
            </div>
            <script src="https://newsletter-js.jew.ski/v1/subscribe-embed.js"></script>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
