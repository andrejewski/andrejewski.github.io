<!doctype html>
<html lang="en-US">
  <head>
    <title>Launching Codo in early access</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta
      name="description"
      content="Codo launches as a Github marketplace app"
    />
    <meta name="robots" content="index, follow" />

    <link
      rel="canonical"
      href="https://jew.ski/article/codo-early-access/index.html"
    />

    <link rel="icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/logo192.png" />

    <meta name="theme-color" content="#178bfb" />

    <meta property="og:title" content="Launching Codo in early access" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="Chris Andrejewski" />
    <meta property="og:url" content="/article/codo-early-access/index.html" />

    <meta property="twitter:card" content="summary" />
    <meta name="twitter:site" content="compooter" />
    <meta name="twitter:title" content="Launching Codo in early access" />
    <meta
      name="twitter:description"
      content="Codo launches as a Github marketplace app"
    />

    <link rel="stylesheet" href="/stylesheet/highlight-atom-one.css" />
    <style data-styled="true" data-styled-version="6.1.17">
      .bctNTf {
        color: rgb(6, 90, 163);
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .bctNTf {
          color: #5eb6ff;
        }
      } /*!sc*/
      data-styled.g1[id='sc-Qotzb'] {
        content: 'bctNTf,';
      } /*!sc*/
      .hxbvAH {
        padding-bottom: 4rem;
      } /*!sc*/
      data-styled.g2[id='sc-fYsHOw'] {
        content: 'hxbvAH,';
      } /*!sc*/
      .debzsy {
        background-color: #fff;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .debzsy {
          background-color: #16202e;
        }
      } /*!sc*/
      data-styled.g3[id='sc-dKREkF'] {
        content: 'debzsy,';
      } /*!sc*/
      .dtgyPg {
        padding: 0px 1rem;
        max-width: 720px;
        margin: 0px auto;
      } /*!sc*/
      data-styled.g4[id='sc-fWnslK'] {
        content: 'dtgyPg,';
      } /*!sc*/
      .eyyqef {
        margin: 15px 0em;
      } /*!sc*/
      .eyyqef:first-child {
        margin-top: 0px;
      } /*!sc*/
      .eyyqef:last-child {
        margin-bottom: 0px;
      } /*!sc*/
      data-styled.g5[id='sc-dIMoHT'] {
        content: 'eyyqef,';
      } /*!sc*/
      .hkwuxz {
        padding-top: 3rem;
        margin-bottom: 3rem;
      } /*!sc*/
      data-styled.g6[id='sc-iQQCXo'] {
        content: 'hkwuxz,';
      } /*!sc*/
      .foDfFI {
        font-size: 3rem;
        margin: 0px;
      } /*!sc*/
      @media (max-width: 720px) {
        .foDfFI {
          font-size: 1.8rem;
        }
      } /*!sc*/
      data-styled.g7[id='sc-gDpztx'] {
        content: 'foDfFI,';
      } /*!sc*/
      .iwpgrf {
        margin: 0;
        line-height: 1.5rem;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .iwpgrf {
          color: #dbe0e7;
        }
      } /*!sc*/
      data-styled.g8[id='sc-kpOvIu'] {
        content: 'iwpgrf,';
      } /*!sc*/
      .leFObR {
        display: inline-block;
        font-size: 0.9rem;
        line-height: 1rem;
        background-color: #dcefff;
        color: #151515;
        border-radius: 3px;
        padding: 0.25rem 0.5rem;
        margin: 0.25rem 0.5rem 0.25rem 0;
        text-decoration: none;
        white-space: nowrap;
      } /*!sc*/
      .leFObR:hover {
        text-decoration: underline;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .leFObR {
          background-color: #2f3d4e;
          color: #c8d2e0;
        }
      } /*!sc*/
      data-styled.g9[id='sc-icnseD'] {
        content: 'leFObR,';
      } /*!sc*/
      .iLjxYJ {
        color: inherit;
        text-decoration: none;
      } /*!sc*/
      .iLjxYJ:hover span {
        text-decoration: underline;
      } /*!sc*/
      .iLjxYJ:hover:after {
        opacity: 1;
      } /*!sc*/
      .iLjxYJ:after {
        content: 'ðŸ”—';
        padding: 0 0.5rem;
        font-size: 1rem;
        opacity: 0.25;
      } /*!sc*/
      data-styled.g10[id='sc-jMsorb'] {
        content: 'iLjxYJ,';
      } /*!sc*/
      .hskrPk {
        padding: 1rem;
        margin: 3rem 0;
        background-color: #eef8ff;
        color: #4a8dc8;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .hskrPk {
          background-color: #2a3d55;
          color: #95afd1;
        }
      } /*!sc*/
      .hskrPk label {
        text-transform: uppercase;
        font-weight: bold;
        font-size: 0.85rem;
        color: #08273f;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .hskrPk label {
          color: #dde0e3;
        }
      } /*!sc*/
      .hskrPk .sc-kpOvIu {
        color: #153248;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .hskrPk .sc-kpOvIu {
          color: #d0e4ff;
        }
      } /*!sc*/
      .hskrPk ul {
        margin: 0.5rem 0;
        padding: 0;
        padding-left: 1rem;
      } /*!sc*/
      .hskrPk a {
        color: rgb(6, 90, 163);
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .hskrPk a {
          color: #5eb6ff;
        }
      } /*!sc*/
      .hskrPk a code {
        font-family: Monaco, monospace;
        font-size: 0.9rem;
        padding: 0 0.25rem;
        border-radius: 3px;
        background-color: #b9dbf5;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .hskrPk a code {
          background-color: #354e6d;
        }
      } /*!sc*/
      data-styled.g11[id='sc-cXawGu'] {
        content: 'hskrPk,';
      } /*!sc*/
      * {
        box-sizing: border-box;
      } /*!sc*/
      body {
        margin: 0px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica,
          Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
          'Segoe UI Symbol';
        background-color: #eff7fd;
        color: #000;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        body {
          background-color: #0d1117;
          color: #fff;
        }
      } /*!sc*/
      data-styled.g12[id='sc-global-kFwHxP1'] {
        content: 'sc-global-kFwHxP1,';
      } /*!sc*/
      .jjMGJZ {
        display: flex;
        justify-content: space-between;
        align-items: center;
      } /*!sc*/
      .jjMGJZ h1 {
        font-size: 1.5rem;
        padding: 1rem 0px;
        margin: 0;
      } /*!sc*/
      .jjMGJZ h1 a {
        text-decoration: none;
        color: inherit;
      } /*!sc*/
      .jjMGJZ h1 a:hover {
        text-decoration: underline;
      } /*!sc*/
      @media (max-width: 720px) {
        .jjMGJZ .sc-jJAtPt {
          display: none;
        }
      } /*!sc*/
      data-styled.g14[id='sc-cUiCeM'] {
        content: 'jjMGJZ,';
      } /*!sc*/
      .gdJarr {
        border-top: 2px solid #d7d7d7;
        margin: 4rem 0;
        padding-top: 4rem;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .gdJarr {
          border-color: #4c545e;
        }
      } /*!sc*/
      data-styled.g54[id='sc-gDVcuj'] {
        content: 'gdJarr,';
      } /*!sc*/
      .hpaLEJ h1 > a,
      .hpaLEJ h2 > a,
      .hpaLEJ h3 > a,
      .hpaLEJ h4 > a,
      .hpaLEJ h5 > a,
      .hpaLEJ h6 > a {
        color: inherit;
        text-decoration: none;
      } /*!sc*/
      .hpaLEJ h1 > a:hover,
      .hpaLEJ h2 > a:hover,
      .hpaLEJ h3 > a:hover,
      .hpaLEJ h4 > a:hover,
      .hpaLEJ h5 > a:hover,
      .hpaLEJ h6 > a:hover {
        text-decoration: underline;
      } /*!sc*/
      .hpaLEJ p,
      .hpaLEJ li {
        line-height: 1.5rem;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .hpaLEJ p,
        .hpaLEJ li {
          color: #dbe0e7;
        }
      } /*!sc*/
      .hpaLEJ a {
        color: rgb(6, 90, 163);
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .hpaLEJ a {
          color: #5eb6ff;
        }
      } /*!sc*/
      .hpaLEJ ul {
        padding-left: 1rem;
      } /*!sc*/
      .hpaLEJ code {
        font-family: Monaco, monospace;
      } /*!sc*/
      .hpaLEJ h1 code,
      .hpaLEJ h2 code,
      .hpaLEJ h3 code,
      .hpaLEJ h4 code,
      .hpaLEJ h5 code,
      .hpaLEJ h6 code,
      .hpaLEJ li code,
      .hpaLEJ p code {
        font-size: 0.9em;
        padding: 0 0.25em;
        border-radius: 3px;
        background-color: #eff7fd;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .hpaLEJ h1 code,
        .hpaLEJ h2 code,
        .hpaLEJ h3 code,
        .hpaLEJ h4 code,
        .hpaLEJ h5 code,
        .hpaLEJ h6 code,
        .hpaLEJ li code,
        .hpaLEJ p code {
          background-color: #2b3644;
        }
      } /*!sc*/
      .hpaLEJ pre {
        background-color: #eff7fd;
        padding: 0.5rem 0.75rem;
        overflow-x: scroll;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .hpaLEJ pre {
          background-color: #2b3645;
        }
      } /*!sc*/
      .hpaLEJ img {
        display: block;
        max-width: 100%;
        max-height: 520px;
        font-size: 0;
        margin: 0px auto;
        padding: 0px;
      } /*!sc*/
      .hpaLEJ video {
        display: block;
        margin: 1rem auto;
      } /*!sc*/
      .hpaLEJ figure {
        text-align: center;
        margin: 20px 0px;
      } /*!sc*/
      .hpaLEJ figure img {
        display: block;
        max-width: 90vw;
        margin: 0px auto;
      } /*!sc*/
      .hpaLEJ figure figcaption {
        opacity: 0.9;
        font-size: 1.1em;
        margin: 10px auto;
      } /*!sc*/
      .hpaLEJ .cali-collage {
        padding: 20px 0px;
        text-align: center;
      } /*!sc*/
      .hpaLEJ .cali-collage img {
        display: inline-block;
        margin: 10px;
        max-width: 95vw;
        vertical-align: middle;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
      } /*!sc*/
      data-styled.g55[id='sc-bpuAaX'] {
        content: 'hpaLEJ,';
      } /*!sc*/
      .gPIOea {
        text-align: center;
      } /*!sc*/
      @media (prefers-color-scheme: dark) {
        .gPIOea {
          color: #dbe0e7;
        }
      } /*!sc*/
      .gPIOea h3 {
        margin: 0.5em 0;
      } /*!sc*/
      .gPIOea p {
        margin: 0;
      } /*!sc*/
      data-styled.g56[id='sc-fPyrPm'] {
        content: 'gPIOea,';
      } /*!sc*/
    </style>

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-G3SKTPFTEZ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || []
      function gtag() {
        dataLayer.push(arguments)
      }
      gtag('js', new Date())
      gtag('config', 'G-G3SKTPFTEZ')
    </script>
  </head>
  <body>
    <div class="sc-dKREkF debzsy">
      <div class="sc-fYsHOw hxbvAH">
        <div class="sc-dKREkF debzsy">
          <div class="sc-fWnslK dtgyPg">
            <nav class="sc-cUiCeM jjMGJZ">
              <h1><a href="/">Chris Andrejewski</a></h1>
            </nav>
          </div>
        </div>
        <div class="sc-fWnslK dtgyPg">
          <div class="sc-iQQCXo hkwuxz">
            <p class="sc-kpOvIu iwpgrf">
              <a href="/writing" class="sc-icnseD leFObR">Articles</a
              ><a
                href="/category/engineering/index.html"
                class="sc-icnseD leFObR"
                >Engineering</a
              ><a href="/category/product/index.html" class="sc-icnseD leFObR"
                >Product</a
              >
            </p>
            <h1 class="sc-gDpztx foDfFI">
              <a href="#" class="sc-jMsorb iLjxYJ"
                ><span>Launching Codo in early access</span></a
              >
            </h1>
            <p class="sc-kpOvIu iwpgrf">
              Codo launches as a Github marketplace app
            </p>
          </div>
          <div class="sc-cXawGu hskrPk">
            <p class="sc-kpOvIu iwpgrf"><label>Table of contents</label></p>
            <div>
              <ul>
                <li>
                  <a href="#building-a-github-marketplace-app"
                    >Building a Github marketplace app</a
                  >
                </li>
                <li>
                  <a href="#migrating-to-pure-esm">Migrating to pure ESM</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="sc-dIMoHT eyyqef">
            <div class="sc-bpuAaX hpaLEJ">
              <p>
                I'm happy to announce Codo is now in early access at
                <a href="https://codo.dev">codo.dev</a>!
              </p>
              <p>
                It's designed as a Github marketplace app and has a quick
                onboarding experience. The product builds on the
                <a href="/article/codo-todo-comments">open-source CLI tool</a>,
                offering in particular better search features.
              </p>
              <p>
                I've launched the product in early access and it's free to use
                right now. I have every intention of charging a reasonable price
                in the future to fund additional development in this space.
                Interestingly, the Github Marketplace requires me to offer the
                app for free for a period of time until the app has 100
                installations. So I figured an early access plan will help
                kickstart adoption/awareness.
              </p>
              <p>
                Check out the app, please
                <a href="mailto:christoper.andrejewski+codo@gmail.com"
                  >shoot me feedback on it</a
                >, and thanks in advance!
              </p>
              <p>
                Now let's talk about some the engineering pieces of building
                this app.
              </p>
              <h1 id="building-a-github-marketplace-app">
                <a href="#building-a-github-marketplace-app"
                  >Building a Github marketplace app</a
                >
              </h1>
              <p>
                This is my first Github marketplace app. Of the projects I work
                on, Codo seemed like the perfect candidate for the marketplace
                because it pairs so well with Git.
              </p>
              <p>
                While Codo is written in Rust, the app is written in
                Node.js/Typescript. The architecture is fairly simple. For
                example, lots of the normal application boilerplate surrounding
                user management I've leaned on Github for. Overall, it has been
                a pretty good experience integrating with Github.
              </p>
              <p>
                Here's a friction log of sharp edges of working with Github:
              </p>
              <ul>
                <li>
                  Github published some bad SDK versions, I had to use older
                  ones.
                </li>
                <li>
                  Initializing a Github client is weird. I need an
                  <code>app_id</code>, <code>app_private_key</code>,
                  <code>app_webhook_secret</code>, <code>client_id</code>, and
                  <code>client_secret</code> plus auth tokens in various
                  contexts. Toss in JWT and request verifying/signing bits and
                  dang it's <em>necessary</em> Github ship SDKs to help with
                  this. And the SDKs still don't make the experience great. Not
                  to make a rant here, but Stripe processes +1 trillion dollars
                  on behalf of huge and small companies and governments.
                  Stripe's still rocking a single <code>publishable_key</code>,
                  <code>secret_key</code>, and <code>webhook_secret</code>. I'm
                  very wary of these sophisticated client auth schemes because
                  very serious business is done with the simple schemes just
                  fine.
                </li>
                <li>
                  Speaking of SDKs, I'm always disappointed by their complete
                  disregard for modeling errors. I appreciate Rust/Go that force
                  the SDK designers hand to give us as consumers something. But
                  Github's JavaScript is <code>try..catch</code> city, learned
                  the hard way from testing locally and in production over a
                  fairly long period of time and I'm still not happy with
                  <em>spec-level</em> robustness of my code.
                </li>
                <li>
                  Github's SDKs do shine in terms of TypeScript support. Webhook
                  payloads and request/responses are well typed. They've
                  embraced the features and limitations of TypeScript in how
                  they design their JavaScript APIs. It's obvious Github does
                  its JavaScript in TypeScript. This isn't to say the types are
                  amazing. At the end of the day the SDK does resurface sharp
                  edges, allowing nulls where there are never nulls, and a lack
                  of calling context that one would encounter from the REST API
                  spec. It's nonetheless a decent SDK.
                </li>
                <li>
                  Making a Github app and getting it listed in the marketplace
                  takes two manual reviews. I was happy with the response time
                  considering the human element they've deemed necessary. Both
                  reviews were done in under two days and I was approved and on
                  my way. What was frustrating was just how much of the admin
                  interface was shielded off <em>until</em> I got approved. So
                  the next steps were super unclear and it made it hard to do
                  more work that would be coming down the line based on the
                  docs.
                </li>
                <li>
                  There is noticeable slowness in the API. I'm pretty mindful of
                  minimizing and deferring work in Codo so the experience is
                  snappy for the most part but I'm seeing about
                  <code>200ms</code> per Github API request and those requests
                  dominate the overall request time. I've lightly looked at
                  optimizing with their GraphQL API without much improvement,
                  and into my own server-side caching but now I'm trading off
                  correctness and new complexity. I'd like a faster API.
                </li>
                <li>
                  Testing is an afterthought for Github apps. The testing advice
                  is basically make the same app again. There's no help or
                  assistance for copying over settings or anything. There's no
                  code as infrastructure way to define these apps so it was a
                  lot of poking, pasting, and comparing between the various
                  versions of the app I working on.
                </li>
              </ul>
              <p>
                Okay, that's everything I can think of for now. Which means
                overall, this API experience was pretty good!
              </p>
              <h1 id="migrating-to-pure-esm">
                <a href="#migrating-to-pure-esm">Migrating to pure ESM</a>
              </h1>
              <p>
                Unrelated to anything really, in the development of Codo I
                migrated my codebase to pure-ESM modules. This means my
                <code>package.json</code> has
                <code>&quot;type&quot;: &quot;module&quot;</code> in it.
              </p>
              <p>
                ESM has been around a long time but adoption is still not there.
                Over the migration hump, I'm happy with it and hope others get
                on the train.
              </p>
              <p>
                It's hard to make the case for a move to ESM in a business
                context because, excluding subtle production facing bugs, the
                measurable impact of such a migration is small. I like ESM
                because, compared to CommonJS, it's less magic. It gets easier
                to do tree-shaking, there's less obscure AST walking, file
                path-ing is more clear. It's a bunch of small things that do and
                have slowed me down working in the weeds of keeping a JS build
                system afloat.
              </p>
              <p>
                A large business can afford to have one unfortunate person or
                team watch all the transpilers and build tools and kick them
                along as they fall over in more and more ways. But it does seem,
                for the better, it does make economic sense to adopt ESM in
                mid-size and smaller projects.
              </p>
              <p>
                Since 2015 when ESM was introduced, we've loved the syntax but
                have spent a massive effort trying to tech ourselves out of a
                migration. Nearing a decade since, I think we've tech'd long
                enough and it's time to truly embrace ESM as the much simpler
                future for JavaScript.
              </p>
              <p>Thanks for reading!</p>
            </div>
          </div>
          <div class="sc-dIMoHT eyyqef">
            <p class="sc-kpOvIu iwpgrf">
              <small
                ><time
                  datetime="2024-03-23T00:00:00.000Z"
                  title="2024-03-23T00:00:00.000Z"
                  >Published 3/23/2024</time
                ></small
              >
            </p>
          </div>
          <div
            class="sc-gDVcuj gdJarr newsletter-container"
            data-frame-src="https://newsletter.jew.ski/frame/subscribe"
          >
            <div class="sc-fPyrPm gPIOea">
              <h3>Subscribe for new articles</h3>
              <div class="newsletter-form"></div>
              <p>
                <small
                  >Or add the
                  <a href="/writing/feed.atom.xml" class="sc-Qotzb bctNTf"
                    >Atom feed</a
                  >
                  to your feed reader.</small
                >
              </p>
            </div>
            <script src="https://newsletter-js.jew.ski/v1/subscribe-embed.js"></script>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
